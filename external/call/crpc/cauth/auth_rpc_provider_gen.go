// Code generated by rpcgen. DO NOT EDIT.

package cauth

import (
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rclient"
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rclient/rcfactory"
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rpccall"
	"time"
)

type authRpcProvider struct {
	clientFactory rcfactory.ArpcClientFactory
}

func NewAuthRpcProvider(clientFactory rcfactory.ArpcClientFactory) AuthRpcProvider {
	return &authRpcProvider{
		clientFactory: clientFactory,
	}
}


func (p *authRpcProvider) Auth(req rpccall.RpcReqWrapper[AuthReq]) (rpccall.RpcRespWrapper[AuthResp], error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespWrapper[AuthResp]
	if err := cp.Call("/auth", &req, &resp, 1 * time.Second); err != nil {
		return resp, err
	}
	return resp, nil
}

func (p *authRpcProvider) Clear(req rpccall.RpcReqWrapper[ClearReq]) (rpccall.RpcRespSimple, error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespSimple
	if err := cp.Call("/clear", &req, &resp, 2 * time.Second); err != nil {
		return resp, err
	}
	return resp, nil
}

func (p *authRpcProvider) UpdateToken(req rpccall.RpcReqWrapper[UpdateReq]) (rpccall.RpcRespSimple, error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespSimple
	if err := cp.Call("/update_token", &req, &resp, 1 * time.Second); err != nil {
		return resp, err
	}
	return resp, nil
}


func (p *authRpcProvider) acquireClientProxy() rclient.ArpcClientProxy {
	return p.clientFactory.AcquireClient("two_service")
}
